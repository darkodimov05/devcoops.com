I"<p>A bastion host, or also known as a Jumpbox, is a server which is exposed on the public (demilitarized zone) network for a special purpose. The bastion host is designed and configured to withstand attacks, and to be accessible from the outside world, usually by using SSH or RPD, so you can safely connect to the private network, or the backend services. The server has a small attack surface by hosting a single application, like a proxy server, and running only the necessary services. Although, when we think of a bastion host, we mean a server that is accessible using SSH or RDP, a bastion host could also be:</p>
<ul>
  <li>DNS server</li>
  <li>Email server</li>
  <li>FTP server</li>
  <li>VPN server</li>
  <li>Proxy server</li>
  <li>Web server</li>
</ul>

<p>Azure Cloud came up with a Platform-as-a-service (PaaS) this year, known as <code class="language-plaintext highlighter-rouge">Azure Bastion</code>. <strong>Azure Bastion</strong> is a fully managed service that allows you to securely access yours Azure Virtual Machines over SSH/RDP directly from the Azure Portal. It brings advantages:</p>
<ul>
  <li>No need for RDP or SSH client on your local machine, connect directly from the Azure Portal</li>
  <li>No need for local RDP or SSH ports</li>
  <li>No public IP required on the Azure VM</li>
  <li>Works with modern browsers on any device</li>
  <li>Can replace an existing Bastion Host</li>
</ul>

<p><img src="/assets/images/screenshots/screenshot39.png" alt="Source: Microsoft Docs" />
<em>Source: Microsoft Docs</em></p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>Azure account</li>
  <li>Azure VM</li>
</ul>

<h2 id="create-an-azure-bastion-host">Create an Azure Bastion host</h2>
<p><strong>Step 1</strong>. Open the Azure Portal and search the Marketplace for <em>Bastion</em>.
<img src="/assets/images/screenshots/screenshot34.png" alt="Azure Bastion marketplace" /></p>

<p><strong>Step 2</strong>. Click <strong>Create</strong>.</p>

<p><strong>Step 3</strong>. On the <strong>Project details</strong>, create new <em>Resource group</em>. For example <em>azure-bastion-rg</em>.
<img src="/assets/images/screenshots/screenshot35.png" alt="Azure Bastion project-details" /></p>

<p><strong>Step 4</strong>. On the <strong>Instance Details</strong>, enter the <em>Name</em> of the instance. For example: <em>azure-bastion</em>.
<img src="/assets/images/screenshots/screenshot36.png" alt="Azure Bastion instance-details" /></p>

<p><strong>Step 5</strong>. On the <strong>Configure virtual networks</strong>, add an existing virtual network, or create a new one. Also, make sure the <code class="language-plaintext highlighter-rouge">Azure Bastion</code> subnet name is <strong>AzureBastionSubnet</strong> with a subnet mask at least /27. Create new public IP address and enter a <em>Public IP address name</em>.
<img src="/assets/images/screenshots/screenshot37.png" alt="Azure Bastion virtual-networks" /></p>

<p><strong>Step 6</strong>. Click <strong>Review + create</strong>.
<img src="/assets/images/screenshots/screenshot38.png" alt="Azure Bastion review" /></p>

<p><strong>Step 7</strong>. Click <strong>Create</strong>.</p>

<h2 id="connect-with-azure-bastion">Connect with Azure Bastion</h2>

<p><strong>Step 8</strong>. Under <em>Virtual Machines</em> from the main Azure Portal window, click on the VM name that you want to connect to.</p>

<p><strong>Step 9</strong>. Click <strong>Connect</strong>. It will open up a new panel on the right side. Click <strong>BASTION</strong>.</p>

<p><strong>Step 10</strong>. Enter the <em>Username</em> and under <em>Authentication Type</em>, choose <em>SSH Private Key</em> or *SSH Private Key from Local file. Click <strong>Connect</strong>.
<img src="/assets/images/screenshots/screenshot40.png" alt="Azure Bastion connect" /></p>

<p><strong>Step 11</strong>. A new console will be open in another browser tab.
<img src="/assets/images/screenshots/screenshot41.png" alt="Azure Bastion connect" /></p>

<h2 id="cleanup">Cleanup</h2>
<p><strong>Step 12</strong>. Delete the resource group using the Azure CLI:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az group delete <span class="nt">--name</span> <span class="s2">"azure-bastion-rg"</span>
</code></pre></div></div>

<p>More about <a href="https://docs.microsoft.com/en-us/azure/bastion/bastion-create-host-portal" target="_blank">Create an Azure Bastion host</a>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>From a security aspect <code class="language-plaintext highlighter-rouge">Azure Bastion</code> could be quite useful, if you don’t want to expose ports to the public network. But, it’s not so practical and productive copying and pasting keys from the clipboard to the Azure Portal, especially if you are fan of the Terminal, or even working as DevOps.</p>
:ET