I"7'<p>Nginx was created in 2004 by a Russian developer Igor Sysoev as he was frustrated with Apache and wanted to build a replacement capable of handling 10000 concurrent connections with the focus on high performance, high concurrency and low memory usage. Today Nginx serves the majority of the world’s top 1000 websites and whilst this growth is largely due to its performance it’s also because Nginx is relatively easy to get started with. Of course it’s by no means a simple piece of software but it’s really good at making practical tasks such as caching or video streaming. Very easy to implement and there’s a large number of first and third party modules which helps to extend its core functionality. However it’s important to understand that Nginx is a reverse proxy server at its core.</p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>Make sure that you are logged into your Ubuntu 18.04 machine as a user with <code class="language-plaintext highlighter-rouge">sudo</code> privileges.</li>
</ul>

<h2 id="about-the-c10k-problem">About the C10k Problem</h2>
<p>The C10k problem is the problem of optimising network sockets to handle a large number of clients at the same time. The name C10k is a numeronym for concurrently handling ten thousand connections. Note that concurrent connections are not the same as requests per second, though they are similar: handling many requests per second requires high throughput (processing them quickly), while high number of concurrent connections requires efficient scheduling of connections.</p>

<h2 id="comparation-nginx-vs-apache">Comparation Nginx VS Apache</h2>
<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Apache</code> is configured in what’s called prefork mode. That means that he had spawned a set number of processors and each of which can serve a single request at a time regardless is that request for php or an image.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Nginx</code> on the other hand deals with the requests asynchronously meaning that a single nginx process can serve multiple request concurrently. Because Nginx has asynchronous design unlike Apache can’t embed server site programming, meaning that all requests for Dynamic Content have to be dealt by a completely separate process like PHP-FPM(he is not build-in module in nginx, he is
a solved like reverse proxy).</p>
  </li>
</ul>

<h2 id="installing-nginx-with-a-package-manager">Installing Nginx with a package manager</h2>
<p>The first installation method that I will cover will be via the operating system built-in package manager. Before we start please note that this is a very quick and easy solution and it’s also very limited. It doesn’t allow us to add any extra modules or funcionality to <code class="language-plaintext highlighter-rouge">Nginx</code>.
As we already know Ubuntu ships with the <code class="language-plaintext highlighter-rouge">APT</code> package manager, so first we will update our system by running:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
</code></pre></div></div>
<p>Now all the packages are up to date, so we can install <code class="language-plaintext highlighter-rouge">Nginx</code> by running</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>nginx
</code></pre></div></div>
<p>It will ask your for some additional dependency packages to be install. Type <code class="language-plaintext highlighter-rouge">yes</code>.
After the installation is done the Nginx process is also up and running. We can confirm this by running:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl status nginx
</code></pre></div></div>

<h2 id="building-nginx-from-source">Building Nginx from source</h2>
<p>Before we start bulding Nginx from source, as a good practise is to update all the packages:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get update
</code></pre></div></div>
<p>The next step is downloading the latest Nginx sourcecode.
Now before we start navigating the Nginx websites note that we have both <code class="language-plaintext highlighter-rouge">nginx.org</code> and <code class="language-plaintext highlighter-rouge">nginx.com</code>. <code class="language-plaintext highlighter-rouge">Nginx.org</code> is where we’ll look for the majority of our documentation, and <code class="language-plaintext highlighter-rouge">nginx.com</code> is the flashier product side of Nginx. Although we’ll also have to visit it for some resources.</p>

<p>To download the latest source Nginx version you can visit <a href="http://nginx.org/en/download.html">the following Nginx page</a>. You can use <code class="language-plaintext highlighter-rouge">wget</code> or <code class="language-plaintext highlighter-rouge">curl</code> to download it on your Ubuntu machine. We will use <code class="language-plaintext highlighter-rouge">wget</code>:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>wget http://nginx.org/download/nginx-1.17.5.tar.gz
</code></pre></div></div>
<p>Next, extract the package with the following command:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo tar</span> <span class="nt">-zxvf</span> nginx-1.17.5.tar.gz
</code></pre></div></div>
<p>Navigate to the nginx extracted directory:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>nginx-1.17.5.tar.gz
</code></pre></div></div>
<p><strong>Step 1</strong>. Configuring our source with the configure script in the sourcecode directory. First we need to install a compiler for Nginx, so the <code class="language-plaintext highlighter-rouge">./configure</code> script can work:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>build-essential
</code></pre></div></div>
<p>Now we have all the necessary tools to compile Nginx. But if you run the script again you will see that other dependencies are missing (libpcre). You can install them by running:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>libpcre3 libpcre3-dev zlib1g zlib1g-dev libssl-dev
</code></pre></div></div>
<p>If you run the script <code class="language-plaintext highlighter-rouge">./configure</code> again it will run without any errors.</p>

<p><strong>Step 2</strong>. To find all the available configuration options run:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>./configure <span class="nt">--help</span>
</code></pre></div></div>
<p>To get a detail description of each of those configuration visit the <a href="http://nginx.org/en/docs/configure.html">Nginx official documentation</a>.
  Let’s install some methods for <code class="language-plaintext highlighter-rouge">Nginx</code> and buid it from source. To install Nginx parametar methods run:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ./configure 
        <span class="nt">--sbin-path</span><span class="o">=</span>/usr/bin/nginx 
        <span class="nt">--conf-path</span><span class="o">=</span>/etc/nginx/nginx.conf 
        <span class="nt">--error-log-path</span><span class="o">=</span>/var/log/ngix/error.log
        <span class="nt">--pid-path</span><span class="o">=</span>/usr/local/nginx/nginx.pid
        <span class="nt">--with-http_ssl_module</span>
        <span class="nt">--with-pcre</span><span class="o">=</span>../pcre-8.43
        <span class="nt">--with-zlib</span><span class="o">=</span>../zlib-1.2.1
</code></pre></div></div>
<p>Once the custom configuration is done, so we can compile this configuration source by running <code class="language-plaintext highlighter-rouge">make</code>. Please notice that this might take a quite a bit of time:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make
</code></pre></div></div>
<p>Once it is done install the compile source with <code class="language-plaintext highlighter-rouge">make install</code> :</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make <span class="nb">install</span> 
</code></pre></div></div>
<p>To make sure that everything is Ok, check the configuration files that we installed at:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span> /etc/nginx
</code></pre></div></div>
<p>If they are all there, you have succesfully installed <code class="language-plaintext highlighter-rouge">Nginx</code> from source. You can also verify this by checking the Nginx version:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nginx <span class="nt">-V</span>
</code></pre></div></div>
<p>The output should be:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nginx version: nginx/1.17.5
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>
<p>In this tutorial we learned about the Nginx. Why to use Nginx instead of Apache and how to install on Ubuntu 18.04 from a package manager and build it from source. For more details check the <a href="http://nginx.org/">Nginx documentation</a>.</p>
:ET