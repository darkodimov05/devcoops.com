I"Ø<p>MySQL is one of the most used open source relation database management system (RDBMS) with a client-server model. Itâ€™s most commonly used as a web database, although it can have many other purposes, like data warehousing, e-commerce, and logging applications. If you have ever started working as a System Administrator, Database Administrator, or DevOps engineer, one of first things youâ€™ll have to face is creation or configuration of a MySQL instance.<br />
In todayâ€™s post, i will write about creating a MySQL database in the cloud, and iâ€™ll stick with Azure for now. Microsoftâ€™s Azure has a service called <code class="language-plaintext highlighter-rouge">Azure Database Service</code> that is a relation database service for MySQL, PostgreSQL and MariaDB. You can easily create a MySQL server using the Azure Portal, or the Azure CLI.</p>

<h2 id="prerequisites">Prerequisites</h2>
<ul>
  <li>Azure account</li>
</ul>

<p>{% include in-article-ad.html %}</p>

<h2 id="create-an-azure-mysql-database">Create an Azure MySQL Database</h2>
<p><strong>Step 1</strong>. Open <em>Terminal</em> and login to the Azure Portal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az login
</code></pre></div></div>
<p>It will open a new window using the default browser where you will be prompted for email and password.</p>

<p><strong>Step 2</strong>. Create a resource group:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az group create <span class="nt">--name</span> <span class="s2">"mysql-rg"</span> <span class="nt">--location</span> westeurope
</code></pre></div></div>

<p><strong>Step 3</strong>. Create a MySQL server:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql server create <span class="nt">--name</span> <span class="s2">"devcoopsmysqldbserver"</span> <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span> <span class="nt">--location</span> westeurope <span class="nt">--admin-user</span> <span class="s2">"devcoops"</span> <span class="nt">--admin-password</span> <span class="s2">"&lt;insert_password_here&gt;"</span> <span class="nt">--sku-name</span> <span class="s2">"B_Gen5_1"</span>
</code></pre></div></div>
<p>Parameters:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">--name</code>: MySQL server name.</li>
  <li><code class="language-plaintext highlighter-rouge">--resource-group</code>: resource group where the mysql database server belongs to.</li>
  <li><code class="language-plaintext highlighter-rouge">--location</code>: filter the result to show the connectionString only.</li>
  <li><code class="language-plaintext highlighter-rouge">--admin-user</code>: server admin username.</li>
  <li><code class="language-plaintext highlighter-rouge">--admin-password</code>: server admin password.</li>
  <li><code class="language-plaintext highlighter-rouge">--sku-name</code>: SKU name in the following format: {pricing tier}<em>{compute generation}</em>{vCores}. More about the MySQL <a href="https://docs.microsoft.com/en-us/azure/mysql/concepts-pricing-tiers" target="_blank">pricing tiers</a>.</li>
</ul>

<p><strong>Step 4</strong>. Get the connection information:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql server show <span class="nt">--name</span> <span class="s2">"devcoopsmysqldbserver"</span> <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span>
</code></pre></div></div>
<p>The JSON output should look for the <strong>administratorLogin</strong> and <strong>fullyQualifiedDomainName</strong> parameters. For example:<br />
<img src="/assets/images/screenshots/screenshot31.png" alt="Azure Database MySQL connection string" /></p>

<p><strong>Note</strong>: Now that we have the connection information, we could create a database either by:</p>
<ol>
  <li>Connect to the server using the mysql command-line client tool, or the MySQL Workbench GUI tool and create a database:
    <div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">CREATE DATABASE mydb;</span><span class="w">
</span></code></pre></div>    </div>
  </li>
  <li>Using the Azure CLI.</li>
</ol>

<p><strong>Step 5</strong>. Create a Mysql database using Azure CLI:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql db create <span class="nt">--name</span> <span class="s2">"mydb"</span> <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span> <span class="nt">--server-name</span> <span class="s2">"devcoopsmysqldbserver"</span> 
</code></pre></div></div>
<p>Parameters:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">--name</code>: MySQL database name.</li>
  <li><code class="language-plaintext highlighter-rouge">--resource-group</code>: resource group where the database belongs to.</li>
  <li><code class="language-plaintext highlighter-rouge">--server</code>: MySQL server name.</li>
</ul>

<p><strong>Step 6</strong>. Test the connection:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-h</span> devcoopsmysqldbserver.mysql.database.azure.com <span class="nt">-u</span> devcoops@devcoopsmysqldbserver <span class="nt">-p</span> 
</code></pre></div></div>

<h2 id="cleanup">Cleanup</h2>
<p><strong>Step 7</strong>. Delete the MySQL database:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql db delete <span class="nt">--name</span> <span class="s2">"mydb"</span> <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span> <span class="nt">--server-name</span> <span class="s2">"devcoopsmysqldbserver"</span>
</code></pre></div></div>

<p><strong>Step 8</strong>. Delete the MySQL server:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql server delete <span class="nt">--name</span> <span class="s2">"mydb"</span> <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span>
</code></pre></div></div>

<p><strong>Step 9</strong>. Delete the resource group:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az group delete <span class="nt">--name</span> <span class="s2">"mysql-rg"</span>
</code></pre></div></div>

<p>More about <a href="https://docs.microsoft.com/en-us/azure/mysql/quickstart-create-mysql-server-database-using-azure-cli" target="_blank">Azure Database for MySQL using Azure CLI</a>.</p>

<h2 id="conclusion">Conclusion</h2>
<p>This is just a plain example, that shows how easily you can create a MySQL server and database in no time. It can be quite useful for development. If you have trouble connecting to the MySQL server, please check the following:</p>
<ol>
  <li>Configure firewall rules using the command:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql server firewall-rule create  <span class="nt">--server</span> <span class="s2">"devcoopsmysqldbserver"</span>  <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span> <span class="nt">--name</span> AllowMyIP <span class="nt">--start-ip-address</span> <span class="s2">"&lt;insert_start_ip_here&gt;"</span> <span class="nt">--end-ip-address</span> <span class="s2">"&lt;insert_end_ip_here&gt;"</span>
</code></pre></div>    </div>
  </li>
  <li>Disable enforcing SSL (itâ€™s enabled by default on the MySQL server).
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>az mysql server update  <span class="nt">--name</span> <span class="s2">"devcoopsmysqldbserver"</span> <span class="nt">--resource-group</span> <span class="s2">"mysql-rg"</span> <span class="nt">--ssl-enforcement</span> Disabled
</code></pre></div>    </div>
  </li>
  <li>Connection string typo.</li>
</ol>
:ET